# ビジネスルール

## スキル定義ルール

### 命名規則
- `name`: 小文字、ハイフン、数字のみ使用可能
- `name`: 最大64文字
- `name`: 先頭は英字

### 説明文ルール
- `description`: 最大1024文字
- `description`: トリガーワードを含める（自動発火のため）
- `description`: 具体的なユースケースを記載

### 構造ルール
- 1スキル = 1責務（単一責任の原則）
- ノード間の循環参照は禁止
- 孤立ノード（エッジなし）は警告

## エージェント定義ルール

### 権限ルール
- 必要最小限のツールのみ許可
- Write/Edit権限は明示的に指定
- Bash権限はコマンドパターンで制限

### 責務ルール
- 1エージェント = 1専門領域
- 他エージェントとの責務重複を避ける
- 委譲先を明確に定義

## コマンド定義ルール

### 引数ルール
- 引数が必要な場合は `argument-hint` を必ず指定
- 引数は `$1`, `$2` で参照

### プロセスルール
- 各フェーズの完了条件を明記
- レビューループは収束条件を定義
- ロールバック手順を含める

## 品質ルール

### レビュールール
- 全ての変更はレビュー必須
- レビュー指摘はゼロになるまで繰り返し
- セキュリティ関連は security-standards 参照

### テストルール
- 新機能にはテスト必須
- カバレッジ目標: 80%以上
- エッジケースのテスト必須

## 不変条件

以下の条件は常に満たされる必要がある：

1. **スキルの一意性**: 同一プロジェクト内で name は一意
2. **グラフの整合性**: 全エッジの source/target は有効なノードID
3. **権限の継承**: スキルはツール権限を親から継承（制限不可）
4. **エージェントの独立性**: エージェントは独自の権限設定を持つ

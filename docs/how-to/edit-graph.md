# グラフを編集する

React Flow キャンバスで SkillGraph を編集する手順。

## ノード操作

### ノードを追加する

1. 左パレットからノードタイプを選択
2. キャンバスにドラッグ＆ドロップ
3. ノードが作成される

### ノード種別

| 種別 | 用途 | 例 |
|------|------|------|
| instruction | 手順・方針 | 「ユーザー意図を確認」 |
| example | 入出力例 | 入力: X → 出力: Y |
| tool | ツール呼び出し | Read, Bash |
| decision | 条件分岐 | 「エラーがあれば...」 |

### ノードを編集する

1. ノードをダブルクリック
2. 編集パネルが開く
3. ラベル、Markdown、ツール名を変更
4. 「Apply」で確定

### ノードを削除する

1. ノードを選択
2. Delete キーを押す、または右クリック →「Delete」

## エッジ操作

### エッジを追加する

1. 接続元ノードの右ハンドルをドラッグ
2. 接続先ノードの左ハンドルにドロップ
3. エッジが作成される

### エッジを削除する

1. エッジをクリックして選択
2. Delete キーを押す

## レイアウト

### ノードを移動する

- ノードをドラッグして配置を調整

### キャンバスを操作する

| 操作 | 方法 |
|------|------|
| パン | キャンバスをドラッグ |
| ズーム | スクロールホイール |
| フィット | 「Fit View」ボタン |

## 保存

「Save」ボタンをクリックすると：

1. SkillGraph が検証される
2. 不変条件を満たしていれば保存
3. SKILL.md が再生成される

## バリデーションエラー

保存時に以下がチェックされる：

| エラー | 原因 | 対処 |
|-------|------|------|
| 孤立したエッジ | 存在しないノードを参照 | エッジを削除する |
| 開始ノードなし | 入力エッジがないノードがない | 開始ノードを追加する |
| ID 重複 | 同じ ID のノード/エッジが存在 | 一方を削除する |

## Chat から編集する

Claude Chat でも同じグラフを編集できる。

```
「レビュー結果の後にコミット整形ノードを追加して」
```

GUI で再読み込みすると変更が反映される。

---
description: |
  新機能開発プロセス（反復レビュー型）
  「/feature-dev [機能名]」で開始
  設計→実装→テスト→レビューの完全フローを実行
argument-hint: [feature-name]
---

# 機能開発プロセス: $1

## 概要
新機能「$1」の開発を開始します。
設計から実装、テスト、レビューまでの完全なワークフローを実行します。

---

## Phase 1: 設計

### 1.1 要件確認
- user-stories スキルから関連要件を確認
- 機能要件と非機能要件を整理

### 1.2 設計（architect エージェント）
architect エージェントに以下を依頼：
- アーキテクチャ設計
- 技術選定
- インターフェース設計

### 1.3 設計レビューループ
```
設計完了
    ↓
[code-reviewer] 設計レビュー
    ↓
指摘あり? ─Yes→ 設計修正 → 再レビュー
    │
    No
    ↓
Phase 2へ
```

**完了条件**: 設計レビューで指摘ゼロ

---

## Phase 2: 実装

### 2.1 ブランチ作成
```bash
git checkout -b feature/$1
```

### 2.2 実装（implementer エージェント）
implementer エージェントに以下を依頼：
- 型定義の作成
- 主要ロジックの実装
- エラーハンドリング

### 2.3 テスト作成（qa-specialist エージェント）
qa-specialist エージェントに以下を依頼：
- ユニットテストの作成
- エッジケースのテスト

### 2.4 実装レビューループ
```
実装完了
    ↓
[code-reviewer] コードレビュー
    │
    ├── CRITICAL指摘 → 必須修正 → 再レビュー
    │
    ├── WARNING指摘 → 修正推奨 → 再レビュー
    │
    └── 指摘なし → Phase 3へ
```

**完了条件**: CRITICAL/WARNING 指摘がゼロ

---

## Phase 3: 品質確認

### 3.1 テスト実行
```bash
npm test
npm run test:coverage
```

### 3.2 カバレッジ確認
- Line: 80%以上
- Branch: 75%以上
- Function: 85%以上

### 3.3 セキュリティレビュー
security-standards スキルに基づくチェック：
- [ ] インジェクション脆弱性なし
- [ ] XSS脆弱性なし
- [ ] 認可チェック実装
- [ ] 入力バリデーション

### 3.4 最終レビューループ
```
品質確認完了
    ↓
[code-reviewer] 最終レビュー
    ↓
指摘あり? ─Yes→ 修正 → 再レビュー
    │
    No
    ↓
Phase 4へ
```

**完了条件**: 全チェック項目クリア、指摘ゼロ

---

## Phase 4: 完了

### 4.1 コミット
```bash
git add .
git commit -m "feat($1): [説明]"
```

### 4.2 PR作成
```bash
gh pr create --title "feat: $1" --body "..."
```

### 4.3 ドキュメント更新
diataxis スキルに基づき必要なドキュメントを更新：
- README（必要に応じて）
- API リファレンス
- ユーザーガイド

---

## チェックリスト

### 設計フェーズ
- [ ] 要件確認完了
- [ ] 設計ドキュメント作成
- [ ] 設計レビュー APPROVED

### 実装フェーズ
- [ ] ブランチ作成
- [ ] 実装完了
- [ ] テスト作成
- [ ] 実装レビュー APPROVED

### 品質フェーズ
- [ ] テスト全パス
- [ ] カバレッジ目標達成
- [ ] セキュリティチェック完了
- [ ] 最終レビュー APPROVED

### 完了フェーズ
- [ ] コミット完了
- [ ] PR作成
- [ ] ドキュメント更新

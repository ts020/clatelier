---
description: |
  バグ修正プロセス
  「/bugfix [issue番号]」で開始
  調査→修正→検証→レビューのフローを実行
argument-hint: [issue-number]
---

# バグ修正プロセス: #$1

## 概要
Issue #$1 のバグ修正を開始します。
原因調査から修正、検証、レビューまでのワークフローを実行します。

---

## Phase 1: 調査

### 1.1 Issue確認
- Issue #$1 の内容を確認
- 再現手順を把握
- 影響範囲を特定

### 1.2 原因調査（debugger エージェント）
debugger エージェントに以下を依頼：
- 問題の再現確認
- ログ・スタックトレース分析
- 原因の特定

### 1.3 調査結果報告
```markdown
## 調査結果

### 根本原因
[特定された原因]

### 発生箇所
- ファイル: [path]
- 関数: [function]

### 影響範囲
[他に影響する箇所]

### 修正方針
[どう直すか]
```

**完了条件**: 原因が特定され、修正方針が決定

---

## Phase 2: 修正

### 2.1 ブランチ作成
```bash
git checkout -b fix/$1
```

### 2.2 修正実装（implementer エージェント）
implementer エージェントに以下を依頼：
- バグ修正の実装
- 関連箇所の修正

### 2.3 回帰テスト追加（qa-specialist エージェント）
qa-specialist エージェントに以下を依頼：
- バグを再現するテストケース追加
- 関連する回帰テスト追加

### 2.4 修正レビューループ
```
修正完了
    ↓
[code-reviewer] コードレビュー
    ↓
指摘あり? ─Yes→ 修正 → 再レビュー
    │
    No
    ↓
Phase 3へ
```

**完了条件**: レビュー指摘ゼロ

---

## Phase 3: 検証

### 3.1 テスト実行
```bash
npm test
```

### 3.2 手動検証
- [ ] 報告されたバグが解消されている
- [ ] 再現手順で問題が発生しない
- [ ] 関連機能に影響がない

### 3.3 検証レビューループ
```
検証完了
    ↓
[qa-specialist] 検証レビュー
    ↓
問題あり? ─Yes→ 追加修正 → 再検証
    │
    No
    ↓
Phase 4へ
```

**完了条件**: 全検証項目クリア

---

## Phase 4: 完了

### 4.1 コミット
```bash
git add .
git commit -m "fix(#$1): [修正内容]"
```

### 4.2 PR作成
```bash
gh pr create --title "fix: #$1 [説明]" --body "Closes #$1"
```

### 4.3 Issue更新
- PR番号を Issue にリンク
- 修正内容をコメント

---

## チェックリスト

### 調査フェーズ
- [ ] Issue内容確認
- [ ] 再現確認
- [ ] 原因特定
- [ ] 修正方針決定

### 修正フェーズ
- [ ] ブランチ作成
- [ ] 修正実装
- [ ] 回帰テスト追加
- [ ] レビュー APPROVED

### 検証フェーズ
- [ ] テスト全パス
- [ ] 手動検証完了
- [ ] 検証レビュー完了

### 完了フェーズ
- [ ] コミット完了
- [ ] PR作成
- [ ] Issue更新
